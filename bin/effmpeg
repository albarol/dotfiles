#!/usr/bin/env bash

GREEN="\e[32m"
RED="\e[31m"
DIM="\e[2m"
BOLD="\e[1m"
NC="\e[0m"

message_help() {
printf  "\
\$ effmpeg [comand] [arguments]

${BOLD}Usage:${NC}
 effmpeg ${GREEN}resize${NC} <image> <percentage>

${BOLD}Commands:${NC}
 ${GREEN}effmpeg${NC}   Resize an image respecting ratio

${BOLD}Options:${NC}
${GREEN}--h${NC}elp     Display this help.
"
}

process_resize() {
    ffmpeg -i $1 -vf scale=iw*$2:ih*$2 $(uuidgen| tr -d "-")-$1
}

process_commands() {
    local cmd=$1
    shift

    case $cmd in
        r|resize) process_resize $@;;
        *) message_help;;
    esac
}


if [[ "${@:-1}" = "--help" ]] && [[ "$#" -eq 1 ]]; then
    message_help && exit 0
elif [[ "$#" -ge 1 ]]; then
    process_commands $@
else
    message_help && exit 0
fi

